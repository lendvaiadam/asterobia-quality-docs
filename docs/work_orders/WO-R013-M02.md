# WORK ORDER: R013-M02 NetworkRole Enum & SessionState

**Target Worker**: Backend
**Parent Branch**: `work/WO-R013`
**Worker Branch**: `work/WO-R013-backend`

**CTO Escalation**: Not Required (Pre-approved in CTO Ping #1)
**Escalation Triggers**:
- [ ] Spec Ambiguity
- [ ] Architecture Change
- [ ] Determinism Risk

## 1. Context
R013 Multiplayer requires tracking whether the client is Host, Guest, or Offline, plus session state (hostId, slot, seq counters). This task creates the state management foundation for SessionManager.

## 2. In-Scope Files (Whitelist)
- `src/SimCore/multiplayer/NetworkRole.js` (CREATE)
- `src/SimCore/multiplayer/SessionState.js` (CREATE)
- `src/SimCore/__tests__/sessionState.test.js` (CREATE)

## 3. Strict Out-of-Scope (Blacklist)
- `src/Main.js` (Never touch entry point)
- `src/Core/Game.js` (Not yet - M03)
- `package.json` (No dependency changes)
- SessionManager itself (M03 scope)

## 4. Acceptance Criteria ("Done When")
- [ ] `NetworkRole.js` exports enum: `{ OFFLINE, HOST, GUEST }`
- [ ] `SessionState.js` exports class with: `role`, `hostId`, `sessionId`, `mySlot`, `seqCounter`, `players[]`, `lastSeenSeq{}`
- [ ] `SessionState` has `reset()` method that clears all fields
- [ ] Unit tests pass: `npm test -- sessionState`
- [ ] Linter is green

## 5. Antigravity Decision Log
**2026-02-04**: CTO Ping #1 APPROVED. Proceed with M01+M02 parallelizable work.

## 6. Reference
- Spec: `docs/specs/R013_MULTIPLAYER_HANDSHAKE_HOST_AUTHORITY.md` Section 2.3 (Authority Rules)
- Tasklist: `docs/specs/R013_IMPLEMENTATION_TASKLIST.md` Section M02
